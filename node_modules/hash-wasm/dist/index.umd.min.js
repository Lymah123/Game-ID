/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 */

!function(A,I){"object"==typeof exports&&"undefined"!=typeof module?I(exports):"function"==typeof define&&define.amd?define(["exports"],I):I((A="undefined"!=typeof globalThis?globalThis:A||self).hashwasm={})}(this,(function(A){"use strict";function I(A,I,g,B){return new(g||(g=Promise))((function(Q,C){function i(A){try{o(B.next(A))}catch(A){C(A)}}function E(A){try{o(B.throw(A))}catch(A){C(A)}}function o(A){var I;A.done?Q(A.value):(I=A.value,I instanceof g?I:new g((function(A){A(I)}))).then(i,E)}o((B=B.apply(A,I||[])).next())}))}class g{constructor(){this.mutex=Promise.resolve()}lock(){let A=()=>{};return this.mutex=this.mutex.then((()=>new Promise(A))),new Promise((I=>{A=I}))}dispatch(A){return I(this,void 0,void 0,(function*(){const I=yield this.lock();try{return yield Promise.resolve(A())}finally{I()}}))}}var B;const Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,C=null!==(B=Q.Buffer)&&void 0!==B?B:null,i=Q.TextEncoder?new Q.TextEncoder:null;function E(A,I){return(15&A)+(A>>6|A>>3&8)<<4|(15&I)+(I>>6|I>>3&8)}function o(A,I){const g=I.length>>1;for(let B=0;B<g;B++){const g=B<<1;A[B]=E(I.charCodeAt(g),I.charCodeAt(g+1))}}const c="a".charCodeAt(0)-10,h="0".charCodeAt(0);function F(A,I,g){let B=0;for(let Q=0;Q<g;Q++){let g=I[Q]>>>4;A[B++]=g>9?g+c:g+h,g=15&I[Q],A[B++]=g>9?g+c:g+h}return String.fromCharCode.apply(null,A)}const D=null!==C?A=>{if("string"==typeof A){const I=C.from(A,"utf8");return new Uint8Array(I.buffer,I.byteOffset,I.length)}if(C.isBuffer(A))return new Uint8Array(A.buffer,A.byteOffset,A.length);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength);throw new Error("Invalid data type!")}:A=>{if("string"==typeof A)return i.encode(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength);throw new Error("Invalid data type!")},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=new Uint8Array(256);for(let A=0;A<a.length;A++)w[a.charCodeAt(A)]=A;function k(A,I=!0){const g=A.length,B=g%3,Q=[],C=g-B;for(let I=0;I<C;I+=3){const g=(A[I]<<16&16711680)+(A[I+1]<<8&65280)+(255&A[I+2]),B=a.charAt(g>>18&63)+a.charAt(g>>12&63)+a.charAt(g>>6&63)+a.charAt(63&g);Q.push(B)}if(1===B){const B=A[g-1],C=a.charAt(B>>2),i=a.charAt(B<<4&63);Q.push(`${C}${i}`),I&&Q.push("==")}else if(2===B){const B=(A[g-2]<<8)+A[g-1],C=a.charAt(B>>10),i=a.charAt(B>>4&63),E=a.charAt(B<<2&63);Q.push(`${C}${i}${E}`),I&&Q.push("=")}return Q.join("")}function n(A){let I=Math.floor(.75*A.length);const g=A.length;return"="===A[g-1]&&(I-=1,"="===A[g-2]&&(I-=1)),I}function G(A){const I=n(A),g=A.length,B=new Uint8Array(I);let Q=0;for(let I=0;I<g;I+=4){const g=w[A.charCodeAt(I)],C=w[A.charCodeAt(I+1)],i=w[A.charCodeAt(I+2)],E=w[A.charCodeAt(I+3)];B[Q]=g<<2|C>>4,Q+=1,B[Q]=(15&C)<<4|i>>2,Q+=1,B[Q]=(3&i)<<6|63&E,Q+=1}return B}const d=16384,e=new g,y=new Map;function H(A,g){return I(this,void 0,void 0,(function*(){let B=null,Q=null,C=!1;if("undefined"==typeof WebAssembly)throw new Error("WebAssembly is not supported in this environment!");const i=()=>new DataView(B.exports.memory.buffer).getUint32(B.exports.STATE_SIZE,!0),c=e.dispatch((()=>I(this,void 0,void 0,(function*(){if(!y.has(A.name)){const I=G(A.data),g=WebAssembly.compile(I);y.set(A.name,g)}const I=yield y.get(A.name);B=yield WebAssembly.instantiate(I,{})})))),h=(A=null)=>{C=!0,B.exports.Hash_Init(A)},a=A=>{if(!C)throw new Error("update() called before init()");(A=>{let I=0;for(;I<A.length;){const g=A.subarray(I,I+d);I+=g.length,Q.set(g),B.exports.Hash_Update(g.length)}})(D(A))},w=new Uint8Array(2*g),k=